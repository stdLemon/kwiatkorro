import{r as l,j as f,R as q,c as C,a as W,b as E,u as G,L as Z}from"./index-C-HyEePa.js";import{P as R,u as L,c as k,G as K,I as V,B as X}from"./button-ojBgHPJ1.js";function J(t,e,{checkForDefaultPrevented:r=!0}={}){return function(o){if(t?.(o),r===!1||!o.defaultPrevented)return e?.(o)}}function N(t,e=[]){let r=[];function s(n,c){const a=l.createContext(c),i=r.length;r=[...r,c];const d=h=>{const{scope:p,children:m,...v}=h,g=p?.[t]?.[i]||a,x=l.useMemo(()=>v,Object.values(v));return f.jsx(g.Provider,{value:x,children:m})};d.displayName=n+"Provider";function u(h,p){const m=p?.[t]?.[i]||a,v=l.useContext(m);if(v)return v;if(c!==void 0)return c;throw new Error(`\`${h}\` must be used within \`${n}\``)}return[d,u]}const o=()=>{const n=r.map(c=>l.createContext(c));return function(a){const i=a?.[t]||n;return l.useMemo(()=>({[`__scope${t}`]:{...a,[t]:i}}),[a,i])}};return o.scopeName=t,[s,Q(o,...e)]}function Q(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(n){const c=s.reduce((a,{useScope:i,scopeName:d})=>{const h=i(n)[`__scope${d}`];return{...a,...h}},{});return l.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return r.scopeName=e.scopeName,r}var y=globalThis?.document?l.useLayoutEffect:()=>{},Y=q[" useInsertionEffect ".trim().toString()]||y;function ee({prop:t,defaultProp:e,onChange:r=()=>{},caller:s}){const[o,n,c]=te({defaultProp:e,onChange:r}),a=t!==void 0,i=a?t:o;{const u=l.useRef(t!==void 0);l.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,s])}const d=l.useCallback(u=>{if(a){const h=re(u)?u(t):u;h!==t&&c.current?.(h)}else n(u)},[a,t,n,c]);return[i,d]}function te({defaultProp:t,onChange:e}){const[r,s]=l.useState(t),o=l.useRef(r),n=l.useRef(e);return Y(()=>{n.current=e},[e]),l.useEffect(()=>{o.current!==r&&(n.current?.(r),o.current=r)},[r,o]),[r,s,n]}function re(t){return typeof t=="function"}function se(t){const e=l.useRef({value:t,previous:t});return l.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function ne(t){const[e,r]=l.useState(void 0);return y(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const n=o[0];let c,a;if("borderBoxSize"in n){const i=n.borderBoxSize,d=Array.isArray(i)?i[0]:i;c=d.inlineSize,a=d.blockSize}else c=t.offsetWidth,a=t.offsetHeight;r({width:c,height:a})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),e}var j="Switch",[oe]=N(j),[ae,ce]=oe(j),P=l.forwardRef((t,e)=>{const{__scopeSwitch:r,name:s,checked:o,defaultChecked:n,required:c,disabled:a,value:i="on",onCheckedChange:d,form:u,...h}=t,[p,m]=l.useState(null),v=L(e,S=>m(S)),g=l.useRef(!1),x=p?u||!!p.closest("form"):!0,[b,w]=ee({prop:o,defaultProp:n??!1,onChange:d,caller:j});return f.jsxs(ae,{scope:r,checked:b,disabled:a,children:[f.jsx(R.button,{type:"button",role:"switch","aria-checked":b,"aria-required":c,"data-state":z(b),"data-disabled":a?"":void 0,disabled:a,value:i,...h,ref:v,onClick:J(t.onClick,S=>{w(D=>!D),x&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})}),x&&f.jsx(M,{control:p,bubbles:!g.current,name:s,value:i,checked:b,required:c,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});P.displayName=j;var I="SwitchThumb",$=l.forwardRef((t,e)=>{const{__scopeSwitch:r,...s}=t,o=ce(I,r);return f.jsx(R.span,{"data-state":z(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e})});$.displayName=I;var ie="SwitchBubbleInput",M=l.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:s=!0,...o},n)=>{const c=l.useRef(null),a=L(c,n),i=se(r),d=ne(e);return l.useEffect(()=>{const u=c.current;if(!u)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(i!==r&&m){const v=new Event("click",{bubbles:s});m.call(u,r),u.dispatchEvent(v)}},[i,r,s]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:a,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});M.displayName=ie;function z(t){return t?"checked":"unchecked"}var le=P,ue=$;function de(t){const e=C.c(9);let r,s;e[0]!==t?({className:r,...s}=t,e[0]=t,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let o;e[3]!==r?(o=k("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),e[3]=r,e[4]=o):o=e[4];let n;e[5]===Symbol.for("react.memo_cache_sentinel")?(n=f.jsx(ue,{"data-slot":"switch-thumb",className:k("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),e[5]=n):n=e[5];let c;return e[6]!==s||e[7]!==o?(c=f.jsx(le,{"data-slot":"switch",className:o,...s,children:n}),e[6]=s,e[7]=o,e[8]=c):c=e[8],c}function fe(t){const e=l.useRef(t);return l.useEffect(()=>{e.current=t}),l.useMemo(()=>(...r)=>e.current?.(...r),[])}var he=W();function pe(){return he.useSyncExternalStore(me,()=>!0,()=>!1)}function me(){return()=>{}}var A="Avatar",[ve]=N(A),[ge,B]=ve(A),T=l.forwardRef((t,e)=>{const{__scopeAvatar:r,...s}=t,[o,n]=l.useState("idle");return f.jsx(ge,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:n,children:f.jsx(R.span,{...s,ref:e})})});T.displayName=A;var F="AvatarImage",H=l.forwardRef((t,e)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:o=()=>{},...n}=t,c=B(F,r),a=xe(s,n),i=fe(d=>{o(d),c.onImageLoadingStatusChange(d)});return y(()=>{a!=="idle"&&i(a)},[a,i]),a==="loaded"?f.jsx(R.img,{...n,ref:e,src:s}):null});H.displayName=F;var U="AvatarFallback",O=l.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:s,...o}=t,n=B(U,r),[c,a]=l.useState(s===void 0);return l.useEffect(()=>{if(s!==void 0){const i=window.setTimeout(()=>a(!0),s);return()=>window.clearTimeout(i)}},[s]),c&&n.imageLoadingStatus!=="loaded"?f.jsx(R.span,{...o,ref:e}):null});O.displayName=U;function _(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function xe(t,{referrerPolicy:e,crossOrigin:r}){const s=pe(),o=l.useRef(null),n=s?(o.current||(o.current=new window.Image),o.current):null,[c,a]=l.useState(()=>_(n,t));return y(()=>{a(_(n,t))},[n,t]),y(()=>{const i=h=>()=>{a(h)};if(!n)return;const d=i("loaded"),u=i("error");return n.addEventListener("load",d),n.addEventListener("error",u),e&&(n.referrerPolicy=e),typeof r=="string"&&(n.crossOrigin=r),()=>{n.removeEventListener("load",d),n.removeEventListener("error",u)}},[n,r,e]),c}var be=T,Se=H,we=O;function Ce(t){const e=C.c(8);let r,s;e[0]!==t?({className:r,...s}=t,e[0]=t,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let o;e[3]!==r?(o=k("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),e[3]=r,e[4]=o):o=e[4];let n;return e[5]!==s||e[6]!==o?(n=f.jsx(be,{"data-slot":"avatar",className:o,...s}),e[5]=s,e[6]=o,e[7]=n):n=e[7],n}function ke(t){const e=C.c(8);let r,s;e[0]!==t?({className:r,...s}=t,e[0]=t,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let o;e[3]!==r?(o=k("aspect-square size-full",r),e[3]=r,e[4]=o):o=e[4];let n;return e[5]!==s||e[6]!==o?(n=f.jsx(Se,{"data-slot":"avatar-image",className:o,...s}),e[5]=s,e[6]=o,e[7]=n):n=e[7],n}function ye(t){const e=C.c(8);let r,s;e[0]!==t?({className:r,...s}=t,e[0]=t,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let o;e[3]!==r?(o=k("bg-muted flex size-full items-center justify-center rounded-full",r),e[3]=r,e[4]=o):o=e[4];let n;return e[5]!==s||e[6]!==o?(n=f.jsx(we,{"data-slot":"avatar-fallback",className:o,...s}),e[5]=s,e[6]=o,e[7]=n):n=e[7],n}function Re(t){return K({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Remove"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M9.525,13.765a.5.5,0,0,0,.71.71c.59-.59,1.175-1.18,1.765-1.76l1.765,1.76a.5.5,0,0,0,.71-.71c-.59-.58-1.18-1.175-1.76-1.765.41-.42.82-.825,1.23-1.235.18-.18.35-.36.53-.53a.5.5,0,0,0-.71-.71L12,11.293,10.235,9.525a.5.5,0,0,0-.71.71L11.293,12Z"},child:[]},{tag:"path",attr:{d:"M12,21.933A9.933,9.933,0,1,1,21.934,12,9.945,9.945,0,0,1,12,21.933ZM12,3.067A8.933,8.933,0,1,0,20.934,12,8.944,8.944,0,0,0,12,3.067Z"},child:[]}]}]}]})(t)}function je(t){const e=C.c(32),{flower:r,onRemove:s}=t,o=r.id,n=String(r.id);let c;e[0]!==n?(c={id:n},e[0]=n,e[1]=c):c=e[1];let a;e[2]!==r.imageUrl?(a=f.jsx(ke,{src:r.imageUrl}),e[2]=r.imageUrl,e[3]=a):a=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx(ye,{children:"CN"}),e[4]=i):i=e[4];let d;e[5]!==a?(d=f.jsxs(Ce,{children:[a,i]}),e[5]=a,e[6]=d):d=e[6];let u;e[7]!==r.name?(u=f.jsx("p",{children:r.name}),e[7]=r.name,e[8]=u):u=e[8];let h;e[9]!==r.species?(h=f.jsx("p",{className:"text-sm font-light",children:r.species}),e[9]=r.species,e[10]=h):h=e[10];let p;e[11]!==u||e[12]!==h?(p=f.jsxs("div",{children:[u,h]}),e[11]=u,e[12]=h,e[13]=p):p=e[13];let m;e[14]!==d||e[15]!==p?(m=f.jsxs("div",{className:"flex items-center gap-4",children:[d,p]}),e[14]=d,e[15]=p,e[16]=m):m=e[16];let v;e[17]!==m||e[18]!==c?(v=f.jsx(Z,{to:"/flowers/$id",params:c,children:m}),e[17]=m,e[18]=c,e[19]=v):v=e[19];let g;e[20]!==r||e[21]!==s?(g=()=>s(r),e[20]=r,e[21]=s,e[22]=g):g=e[22];let x;e[23]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx(Re,{}),e[23]=x):x=e[23];let b;e[24]!==g?(b=f.jsx(X,{onClick:g,variant:"ghost",children:x}),e[24]=g,e[25]=b):b=e[25];let w;e[26]!==v||e[27]!==b?(w=f.jsxs("div",{className:"grid grid-cols-[1fr_max-content]",children:[v,b]}),e[26]=v,e[27]=b,e[28]=w):w=e[28];let S;return e[29]!==r.id||e[30]!==w?(S=f.jsx("li",{children:w},o),e[29]=r.id,e[30]=w,e[31]=S):S=e[31],S}function Ae(t,e,r){return t.filter(s=>{const o=s.name.toLowerCase().includes(r.toLowerCase())||s.species.toLowerCase().includes(r.toLowerCase()),n=s.archivedDate!==void 0;return o&&n===e})}function Le(){const t=C.c(22),[e,r]=E.useState(""),[s,o]=E.useState(!1),n=G();let c;t[0]!==n.actions?(c=function(x){if(x.archivedDate===void 0){const b={archivedDate:new Date().toISOString().split("T")[0],id:x.id};n.actions.updateFlower(b);return}n.actions.removeFlower(x.id)},t[0]=n.actions,t[1]=c):c=t[1];const a=c;let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=g=>r(g.target.value),t[2]=i):i=t[2];let d;t[3]!==e?(d=f.jsx(V,{value:e,onChange:i}),t[3]=e,t[4]=d):d=t[4];let u;t[5]!==s?(u=f.jsx(de,{checked:s,onCheckedChange:o,"aria-label":"pokaÅ¼ archiwum"}),t[5]=s,t[6]=u):u=t[6];let h;t[7]!==d||t[8]!==u?(h=f.jsxs("div",{className:"flex items-center gap-4",children:[d,u]}),t[7]=d,t[8]=u,t[9]=h):h=t[9];let p;if(t[10]!==n.state.flowers||t[11]!==a||t[12]!==e||t[13]!==s){let g;t[15]!==a?(g=x=>f.jsx(je,{flower:x,onRemove:a},x.id),t[15]=a,t[16]=g):g=t[16],p=Ae(n.state.flowers,s,e).map(g),t[10]=n.state.flowers,t[11]=a,t[12]=e,t[13]=s,t[14]=p}else p=t[14];let m;t[17]!==p?(m=f.jsx("ul",{className:"space-y-4 overflow-y-auto",children:p}),t[17]=p,t[18]=m):m=t[18];let v;return t[19]!==h||t[20]!==m?(v=f.jsxs("div",{className:"flex flex-col gap-2 overflow-y-hidden",children:[h,m]}),t[19]=h,t[20]=m,t[21]=v):v=t[21],v}export{Le as component};
