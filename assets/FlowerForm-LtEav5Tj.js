import{r as C,j as n,c as p,h as k,b as V}from"./index-BYcxsM3k.js";import{P as I,c as L,G as B,I as R,B as z}from"./button-DPqQeQNF.js";var F="Label",S=C.forwardRef((t,e)=>n.jsx(I.label,{...t,ref:e,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(t.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));S.displayName=F;var A=S;function H(t){const e=p.c(8);let a,i;e[0]!==t?({className:a,...i}=t,e[0]=t,e[1]=a,e[2]=i):(a=e[1],i=e[2]);let s;e[3]!==a?(s=L("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),e[3]=a,e[4]=s):s=e[4];let r;return e[5]!==i||e[6]!==s?(r=n.jsx(A,{"data-slot":"label",className:s,...i}),e[5]=i,e[6]=s,e[7]=r):r=e[7],r}function M(t){return B({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"},child:[]}]})(t)}const U=[[{label:"Nazwa",name:"name",type:"text"},{label:"Gatunek",name:"species",type:"text"},{label:"Data zakupu",name:"boughtDate",type:"date",defaultValue:new Date().toISOString().split("T")[0]}],[{label:"Wielkość doniczki",name:"potSizeCm",type:"number"},{label:"Notatki",name:"notes",type:"text"}]];function P(t){const e=p.c(9),{defaultImageUrl:a,readonly:i}=t,[s,r]=V.useState(a),f=V.useRef(null);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=function(x){const g=x.target.files?.[0];if(!g)return;const j=URL.createObjectURL(g);r(j)},e[0]=h):h=e[0];const v=h;let c;e[1]!==i?(c=function(){i||f.current?.click()},e[1]=i,e[2]=c):c=e[2];const u=c;let o;e[3]!==u||e[4]!==s?(o=s?n.jsx("img",{src:s,onClick:u,className:"h-full max-h-[60vh] min-h-0 w-full object-contain"}):n.jsx("div",{onClick:u,className:"flex h-full cursor-pointer items-center justify-center rounded-md border-2 border-dashed border-gray-300 bg-gray-50 hover:border-gray-400",children:n.jsx(M,{className:"h-12 w-12 text-gray-400"})}),e[3]=u,e[4]=s,e[5]=o):o=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=n.jsx("input",{ref:f,type:"file",name:"image",accept:"image/*",className:"hidden",onChange:v}),e[6]=d):d=e[6];let m;return e[7]!==o?(m=n.jsxs(n.Fragment,{children:[o,d]}),e[7]=o,e[8]=m):m=e[8],m}function _(t){const e=p.c(30),a=k();let i;e[0]!==t?(i=async function(l){const y={id:l.get("id"),boughtDate:l.get("boughtDate"),name:l.get("name"),potSizeCm:l.get("potSizeCm"),species:l.get("species"),archivedDate:l.get("archivedDate"),image:l.get("image"),notes:l.get("notes")},D={kind:"record",id:Number(y.id),name:String(y.name),boughtDate:String(y.boughtDate),potSizeCm:Number(y.potSizeCm),species:String(y.species),notes:String(y.notes)},N=y.image;N&&N.size>0&&(D.image=N),await t.action(D)},e[0]=t,e[1]=i):i=e[1];const s=i;let r;e[2]!==t.defaultValue?(r=function(l){return t.defaultValue?t.defaultValue[l]:void 0},e[2]=t.defaultValue,e[3]=r):r=e[3];const f=r,h=t.defaultValue?.imageUrl,v=t.readonly||!1;let c;e[4]!==h||e[5]!==v?(c=n.jsx(P,{defaultImageUrl:h,readonly:v}),e[4]=h,e[5]=v,e[6]=c):c=e[6];let u;e[7]!==f?(u=f("id"),e[7]=f,e[8]=u):u=e[8];let o;e[9]!==u?(o=n.jsx("input",{type:"hidden",name:"id",value:u}),e[9]=u,e[10]=o):o=e[10];let d;e[11]!==f||e[12]!==t.readonly?(d=U.map(w=>n.jsx("section",{className:"grid grid-cols-2 gap-5 rounded-sm border p-4",children:w.map(l=>n.jsxs(V.Fragment,{children:[n.jsxs(H,{htmlFor:l.name,children:[l.label,":"]}),n.jsx(R,{defaultValue:f(l.name)||l.defaultValue||"",name:l.name,type:l.type,className:"border",disabled:t.readonly})]},l.name))})),e[11]=f,e[12]=t.readonly,e[13]=d):d=e[13];let m;e[14]!==a?(m=()=>{a({to:"/flowers"})},e[14]=a,e[15]=m):m=e[15];let b;e[16]!==t.secondaryButtonLabel||e[17]!==m?(b=n.jsx(z,{onClick:m,type:"button",variant:"secondary",children:t.secondaryButtonLabel}),e[16]=t.secondaryButtonLabel,e[17]=m,e[18]=b):b=e[18];let x;e[19]!==t.sumbitButtonLabel?(x=n.jsx(z,{type:"submit",children:t.sumbitButtonLabel}),e[19]=t.sumbitButtonLabel,e[20]=x):x=e[20];let g;e[21]!==x||e[22]!==b?(g=n.jsxs("section",{className:"flex justify-around",children:[b,x]}),e[21]=x,e[22]=b,e[23]=g):g=e[23];let j;return e[24]!==s||e[25]!==g||e[26]!==c||e[27]!==o||e[28]!==d?(j=n.jsxs("form",{action:s,className:"flex h-full w-full flex-col justify-around gap-2",children:[c,o,d,g]}),e[24]=s,e[25]=g,e[26]=c,e[27]=o,e[28]=d,e[29]=j):j=e[29],j}export{_ as F};
