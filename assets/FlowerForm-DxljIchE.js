import{r as z,j as i,c as p,h as C,b as N}from"./index-CKw7LtqA.js";import{P as R,c as S,G as I,I as U,B as L}from"./button-DSd9JvHx.js";var B="Label",k=z.forwardRef((t,e)=>i.jsx(R.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));k.displayName=B;var F=k;function A(t){const e=p.c(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let a;e[3]!==n?(a=S("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),e[3]=n,e[4]=a):a=e[4];let c;return e[5]!==s||e[6]!==a?(c=i.jsx(F,{"data-slot":"label",className:a,...s}),e[5]=s,e[6]=a,e[7]=c):c=e[7],c}function H(t){return I({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"},child:[]}]})(t)}const M=[[{label:"Nazwa",name:"name",type:"text"},{label:"Gatunek",name:"species",type:"text"},{label:"Data zakupu",name:"boughtDate",type:"date",defaultValue:new Date().toISOString().split("T")[0]}],[{label:"Wielkość doniczki",name:"potSizeCm",type:"number"},{label:"Notatki",name:"notes",type:"text"}]];function O(t){const e=p.c(15),{defaultImageUrl:n,readonly:s}=t,[a,c]=N.useState(n),h=N.useRef(null);let b;e[0]!==a?(b=function(v){const w=v.target.files?.[0];if(!w)return;const l=URL.createObjectURL(w);a&&URL.revokeObjectURL(a),c(l)},e[0]=a,e[1]=b):b=e[1];const y=b;let u,d;e[2]!==a?(u=()=>()=>{a&&URL.revokeObjectURL(a)},d=[a],e[2]=a,e[3]=u,e[4]=d):(u=e[3],d=e[4]),N.useEffect(u,d);let f;e[5]!==s?(f=function(){s||h.current?.click()},e[5]=s,e[6]=f):f=e[6];const m=f;let o;e[7]!==m||e[8]!==a?(o=a?i.jsx("img",{src:a,onClick:m,className:"h-full max-h-[60vh] min-h-0 w-full object-contain"}):i.jsx("div",{onClick:m,className:"flex h-full cursor-pointer items-center justify-center rounded-md border-2 border-dashed border-gray-300 bg-gray-50 hover:border-gray-400",children:i.jsx(H,{className:"h-12 w-12 text-gray-400"})}),e[7]=m,e[8]=a,e[9]=o):o=e[9];let r;e[10]!==y?(r=i.jsx("input",{ref:h,type:"file",name:"image",accept:"image/*",className:"hidden",onChange:y}),e[10]=y,e[11]=r):r=e[11];let g;return e[12]!==o||e[13]!==r?(g=i.jsxs(i.Fragment,{children:[o,r]}),e[12]=o,e[13]=r,e[14]=g):g=e[14],g}function $(t){const e=p.c(30),n=C();let s;e[0]!==t?(s=async function(l){const j={id:l.get("id"),boughtDate:l.get("boughtDate"),name:l.get("name"),potSizeCm:l.get("potSizeCm"),species:l.get("species"),archivedDate:l.get("archivedDate"),image:l.get("image"),notes:l.get("notes")},D={kind:"record",id:Number(j.id),name:String(j.name),boughtDate:String(j.boughtDate),potSizeCm:Number(j.potSizeCm),species:String(j.species),notes:String(j.notes)},V=j.image;V&&V.size>0&&(D.image=V),await t.action(D)},e[0]=t,e[1]=s):s=e[1];const a=s;let c;e[2]!==t.defaultValue?(c=function(l){return t.defaultValue?t.defaultValue[l]:void 0},e[2]=t.defaultValue,e[3]=c):c=e[3];const h=c,b=t.defaultValue?.imageUrl,y=t.readonly||!1;let u;e[4]!==b||e[5]!==y?(u=i.jsx(O,{defaultImageUrl:b,readonly:y}),e[4]=b,e[5]=y,e[6]=u):u=e[6];let d;e[7]!==h?(d=h("id"),e[7]=h,e[8]=d):d=e[8];let f;e[9]!==d?(f=i.jsx("input",{type:"hidden",name:"id",value:d}),e[9]=d,e[10]=f):f=e[10];let m;e[11]!==h||e[12]!==t.readonly?(m=M.map(w=>i.jsx("section",{className:"grid grid-cols-2 gap-5 rounded-sm border p-4",children:w.map(l=>i.jsxs(N.Fragment,{children:[i.jsxs(A,{htmlFor:l.name,children:[l.label,":"]}),i.jsx(U,{defaultValue:h(l.name)||l.defaultValue||"",name:l.name,type:l.type,className:"border",disabled:t.readonly})]},l.name))})),e[11]=h,e[12]=t.readonly,e[13]=m):m=e[13];let o;e[14]!==n?(o=()=>{n({to:"/flowers"})},e[14]=n,e[15]=o):o=e[15];let r;e[16]!==t.secondaryButtonLabel||e[17]!==o?(r=i.jsx(L,{onClick:o,type:"button",variant:"secondary",children:t.secondaryButtonLabel}),e[16]=t.secondaryButtonLabel,e[17]=o,e[18]=r):r=e[18];let g;e[19]!==t.sumbitButtonLabel?(g=i.jsx(L,{type:"submit",children:t.sumbitButtonLabel}),e[19]=t.sumbitButtonLabel,e[20]=g):g=e[20];let x;e[21]!==g||e[22]!==r?(x=i.jsxs("section",{className:"flex justify-around",children:[r,g]}),e[21]=g,e[22]=r,e[23]=x):x=e[23];let v;return e[24]!==a||e[25]!==x||e[26]!==u||e[27]!==f||e[28]!==m?(v=i.jsxs("form",{action:a,className:"flex h-full w-full flex-col justify-around gap-2",children:[u,f,m,x]}),e[24]=a,e[25]=x,e[26]=u,e[27]=f,e[28]=m,e[29]=v):v=e[29],v}export{$ as F};
